# 非接触式形态测量

## 项目简介：
设计了一套非接触式形态测量系统，OpenMv对目标物体形状进行识别，将结果通过串口发送到控制端，控制端根据中心坐标调节云台，使目标处于画面中央，并将识别结果和距离进行显示。
## 主要职责：
1.数据的接收与解析，在KEIL下利用C语言编程，对OpenMv串口发送的数据进行接收与解析，解析出目标物体中心坐标、形状、颜色信息。

2.云台的控制，将目标物体坐标输入PID控制器，利用STM32控制舵机，使目标始终处于画面中央。

3.利用STM32单片机驱动IIC协议的TOF测距模块进行测距，并将距离、识别结果显示到LCD显示屏。
## 项目成果：
识别正确率98%，距离、边长测量结果误差小于2%，荣获省级一等奖。

## 详细介绍
本项目是参加比赛的一个题目非接触形态测量系统，这个项目当时是拿了省级一等奖。整个项目主要分为图像识别端和控制端显示两个部分，图像识别主要是用于识别三种颜色的矩形、三角形、圆形的纸板，控制端主要是控制云台的转动、测距以及识别结果的显示。识别正确率98%，距离、边长测量结果误差小于2%。

1.图像识别端：图像识别端采用的是基于STM32H7的OpenMv智能摄像头，采用Micro Python语言进行编程，OpenMv将包括颜色和形状在内的识别结果进行打包，在数据包前添加帧头、数据包尾部添加帧位，并通过串口发送给云台控制系统。

2.控制端：控制端采用基于STM32F407ZET6的单片机，在KEIL下利用C语言进行编程，主要实现的功能有云台控制、测距以及识别结果显示，图像识别端将识别到的纸板的中心坐标通过串口发送给控制端，控制端通过PID调节PWM波的占空比进而控制云台舵机的转动，使纸板始终位于画面的正中心。测距采用的是TOF测距模块，通过IIC与控制端进行通信，测量出纸板到控制端的距离。控制端根据图像识别端的识别结果和测量距离显示到LCD显示屏上。


视觉部分：Morphometric-systems.py，采用OpenMV进行检测

控制部分：采用基于STM32F407ZET6的硬件平台做控制以及显示。
